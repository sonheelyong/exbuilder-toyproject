/*
 * App URI: signup
 * Source Location: signup.clx
 *
 * This file was generated by eXbuilder6 compiler, Don't edit manually.
 */
(function() {
	var app = new cpr.core.App("signup", { 
		onPrepare: function(loader) {
		},
		onCreate: function(/* cpr.core.AppInstance */ app, exports) {
			var linker = {};
			// Start - User Script
			/************************************************
			 * login.js
			 * Created at 2023. 3. 24. 오후 5:32:26.
			 *
			 * @author user
			 ************************************************/
			var idc = 0

			/*
			 * "중복확인" 버튼에서 click 이벤트 발생 시 호출.
			 * 사용자가 컨트롤을 클릭할 때 발생하는 이벤트.
			 */
			function onButtonClick(e){
				var button = e.control;
				var ipb1 = app.lookup("ipb1").value;
				if(ipb1 == ""){
					alert("아이디를 입력해주세요.")
				}else{
				app.lookup("idcheck").send();}
			}

			/*
			 * "회원가입" 버튼에서 click 이벤트 발생 시 호출.
			 * 사용자가 컨트롤을 클릭할 때 발생하는 이벤트.
			 */
			function onButtonClick3(e){
				var button = e.control;
				var ipb1 = app.lookup("ipb1").value;
				var ipb2 = app.lookup("ipb2").value;
				var ipb3 = app.lookup("ipb3").value;
				var ipb4 = app.lookup("ipb4").value;
				
				if(ipb3 != ipb4){alert("비밀번호 확인이 일치하지 않습니다.")}
				else if(ipb1 == ""){alert("아이디를 입력해주세요.")}
				else if(ipb2 == ""){alert("이름을 입력해주세요.")}
				else if(ipb3 == ""){alert("비밀번호를 입력해주세요.")}
				else if(idc == 0)  {alert("아이디 중복확인이 필요합니다.")}
				else{
				app.lookup("signup").send();
				alert("회원가입 완료")
				var link = '/ui/index.clx';
				location.href=link;
				}
			}

			/*
			 * "ddd" 버튼에서 click 이벤트 발생 시 호출.
			 * 사용자가 컨트롤을 클릭할 때 발생하는 이벤트.
			 */
			function onButtonClick5(e){
				var button = e.control;
				app.lookup("sms3").send();

			}

			/*
			 * 서브미션에서 submit-success 이벤트 발생 시 호출.
			 * 통신이 성공하면 발생합니다.
			 */
			function onSms3SubmitSuccess(e){
				var sms3 = e.control;
				app.lookup("ipb5").redraw();
			}

			/*
			 * 서브미션에서 submit-success 이벤트 발생 시 호출.
			 * 통신이 성공하면 발생합니다.
			 */
			function onIdcheckSubmitSuccess(e){
				var idcheck = e.control;
				var check = app.lookup("dm2").getValue("idcheck")
				if(check == 0){
					alert("사용가능한 아이디 입니다.")
					idc = 1
				}else{
					alert("이미 사용중인 아이디 입니다.")
					idc = 0
				}
			};
			// End - User Script
			
			// Header
			var dataSet_1 = new cpr.data.DataSet("ds1");
			dataSet_1.parseData({
				"columns": [{"name": "getid"}],
				"rows": [{"getid": "1111"}]
			});
			app.register(dataSet_1);
			var dataMap_1 = new cpr.data.DataMap("dm1");
			dataMap_1.parseData({
				"columns" : [
					{"name": "user_id"},
					{"name": "user_name"},
					{"name": "user_pw"}
				]
			});
			app.register(dataMap_1);
			
			var dataMap_2 = new cpr.data.DataMap("dm2");
			dataMap_2.parseData({
				"columns" : [{
					"name": "idcheck",
					"dataType": "number",
					"defaultValue": ""
				}]
			});
			app.register(dataMap_2);
			
			var dataMap_3 = new cpr.data.DataMap("dm3");
			dataMap_3.parseData({
				"columns" : [{
					"name": "getid",
					"defaultValue": ""
				}]
			});
			app.register(dataMap_3);
			var submission_1 = new cpr.protocols.Submission("signup");
			submission_1.action = "/signup";
			submission_1.addRequestData(dataMap_1);
			app.register(submission_1);
			
			var submission_2 = new cpr.protocols.Submission("idcheck");
			submission_2.action = "/idcheck";
			submission_2.addRequestData(dataMap_1);
			submission_2.addResponseData(dataMap_2, false);
			if(typeof onIdcheckSubmitSuccess == "function") {
				submission_2.addEventListener("submit-success", onIdcheckSubmitSuccess);
			}
			app.register(submission_2);
			
			var submission_3 = new cpr.protocols.Submission("sms3");
			submission_3.action = "/get";
			submission_3.addResponseData(dataMap_3, false);
			if(typeof onSms3SubmitSuccess == "function") {
				submission_3.addEventListener("submit-success", onSms3SubmitSuccess);
			}
			app.register(submission_3);
			app.supportMedia("all and (min-width: 1024px)", "default");
			app.supportMedia("all and (min-width: 500px) and (max-width: 1023px)", "tablet");
			app.supportMedia("all and (max-width: 499px)", "mobile");
			
			// Configure root container
			var container = app.getContainer();
			container.style.css({
				"width" : "100%",
				"height" : "100%"
			});
			var dataRowContext_1 = new cpr.bind.DataRowContext(app.lookup("ds1"), 0);
			container.setBindContext(dataRowContext_1);
			
			// Layout
			var xYLayout_1 = new cpr.controls.layouts.XYLayout();
			container.setLayout(xYLayout_1);
			
			// UI Configuration
			var output_1 = new cpr.controls.Output();
			output_1.value = "회원 가입";
			output_1.style.css({
				"font-size" : "40px",
				"text-align" : "center"
			});
			container.addChild(output_1, {
				"top": "100px",
				"width": "379px",
				"height": "110px",
				"left": "calc(50% - 189px)"
			});
			
			var output_2 = new cpr.controls.Output();
			output_2.value = "아이디";
			output_2.style.css({
				"text-align" : "right"
			});
			container.addChild(output_2, {
				"top": "288px",
				"left": "500px",
				"width": "100px",
				"height": "20px"
			});
			
			var output_3 = new cpr.controls.Output();
			output_3.value = "이름";
			output_3.style.css({
				"text-align" : "right"
			});
			container.addChild(output_3, {
				"top": "348px",
				"left": "500px",
				"width": "100px",
				"height": "20px"
			});
			
			var inputBox_1 = new cpr.controls.InputBox("ipb1");
			inputBox_1.bind("value").toDataMap(app.lookup("dm1"), "user_id");
			container.addChild(inputBox_1, {
				"top": "280px",
				"left": "658px",
				"width": "190px",
				"height": "35px"
			});
			
			var inputBox_2 = new cpr.controls.InputBox("ipb2");
			inputBox_2.bind("value").toDataMap(app.lookup("dm1"), "user_name");
			container.addChild(inputBox_2, {
				"top": "340px",
				"left": "658px",
				"width": "190px",
				"height": "35px"
			});
			
			var inputBox_3 = new cpr.controls.InputBox("ipb3");
			inputBox_3.secret = true;
			inputBox_3.bind("value").toDataMap(app.lookup("dm1"), "user_pw");
			container.addChild(inputBox_3, {
				"top": "400px",
				"left": "658px",
				"width": "190px",
				"height": "35px"
			});
			
			var inputBox_4 = new cpr.controls.InputBox("ipb4");
			inputBox_4.secret = true;
			container.addChild(inputBox_4, {
				"top": "460px",
				"left": "658px",
				"width": "190px",
				"height": "35px"
			});
			
			var output_4 = new cpr.controls.Output();
			output_4.value = "비밀번호";
			output_4.style.css({
				"text-align" : "right"
			});
			container.addChild(output_4, {
				"top": "408px",
				"left": "500px",
				"width": "100px",
				"height": "20px"
			});
			
			var output_5 = new cpr.controls.Output();
			output_5.value = "비밀번호 확인";
			output_5.style.css({
				"text-align" : "right"
			});
			container.addChild(output_5, {
				"top": "468px",
				"left": "500px",
				"width": "100px",
				"height": "20px"
			});
			
			var button_1 = new cpr.controls.Button();
			button_1.value = "중복확인";
			if(typeof onButtonClick == "function") {
				button_1.addEventListener("click", onButtonClick);
			}
			container.addChild(button_1, {
				"top": "288px",
				"left": "871px",
				"width": "77px",
				"height": "20px"
			});
			
			var button_2 = new cpr.controls.Button();
			button_2.value = "회원가입";
			if(typeof onButtonClick3 == "function") {
				button_2.addEventListener("click", onButtonClick3);
			}
			container.addChild(button_2, {
				"top": "555px",
				"left": "712px",
				"width": "101px",
				"height": "30px"
			});
			
			var button_3 = new cpr.controls.Button();
			button_3.value = "ddd";
			if(typeof onButtonClick5 == "function") {
				button_3.addEventListener("click", onButtonClick5);
			}
			container.addChild(button_3, {
				"top": "525px",
				"left": "313px",
				"width": "100px",
				"height": "20px"
			});
			
			var button_4 = new cpr.controls.Button();
			button_4.value = "123";
			if(typeof onButtonClick4 == "function") {
				button_4.addEventListener("click", onButtonClick4);
			}
			container.addChild(button_4, {
				"top": "584px",
				"left": "323px",
				"width": "100px",
				"height": "20px"
			});
			
			var inputBox_5 = new cpr.controls.InputBox("ipb5");
			inputBox_5.bind("value").toDataMap(app.lookup("dm3"), "getid");
			if(typeof onIpb5ValueChange == "function") {
				inputBox_5.addEventListener("value-change", onIpb5ValueChange);
			}
			container.addChild(inputBox_5, {
				"top": "374px",
				"left": "313px",
				"width": "100px",
				"height": "20px"
			});
			
			var inputBox_6 = new cpr.controls.InputBox("ipb6");
			inputBox_6.bind("value").toDataMap(app.lookup("dm2"), "idcheck");
			container.addChild(inputBox_6, {
				"top": "288px",
				"left": "323px",
				"width": "100px",
				"height": "20px"
			});
		}
	});
	app.title = "signup";
	cpr.core.Platform.INSTANCE.register(app);
})();
